(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{30:function(t,e,n){},42:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n.n(a),r=n(23),i=n.n(r),s=(n(30),n(2)),o=n(3),l=n(4),u=n(5),j=n(12),b=n(6),d=n(14),h=n(19),O="user",p=function(t){return localStorage.setItem(O,JSON.stringify(t))},f=function(t){return function(e){setTimeout((function(){e(t)}),1500)}},m=function(){return new Promise((function(t){var e=JSON.parse(localStorage.getItem(O));null===e&&(e={}),f(e)(t)}))},v=n(0),x=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(v.jsx)("div",{children:"Carregando..."})}}]),n}(c.a.Component),k=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).handleChange=function(e){var n,a=e.target,c=a.id,r=a.value,i=t.state.btnClick;i=r.length<3,t.setState((n={},Object(d.a)(n,c,r),Object(d.a)(n,"btnClick",i),n))},t.handleClick=function(){var e,n=t.state.loginField;t.setState({loading:!0}),(e={name:n},new Promise((function(t){p(Object(h.a)(Object(h.a)({},{name:"",email:"",image:"",description:""}),e)),f("OK")(t)}))).then((function(e){return t.setState({redirect:e})}))},t.state={loginField:"",btnClick:!0,loading:!1,redirect:!1},t}return Object(o.a)(n,[{key:"render",value:function(){var t=this.state,e=t.loginField,n=t.btnClick,a=t.loading,c=t.redirect;return Object(v.jsxs)("div",{"data-testid":"page-login",className:"input-group mb-3",children:[a?Object(v.jsx)(x,{}):Object(v.jsxs)("form",{className:"form-login",children:[Object(v.jsx)("p",{children:" Digite seu nome: "}),Object(v.jsx)("input",{type:"text",id:"loginField","data-testid":"login-name-input",onChange:this.handleChange,value:e,placeholder:"Arthur",className:"form-control"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("button",{"data-testid":"login-submit-button",id:"btnLogin",type:"submit",onClick:this.handleClick,disabled:n,className:"btn btn-outline-primary",children:"Entrar"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{})]}),c&&Object(v.jsx)(b.a,{to:"/search"})]})}}]),n}(a.Component),g=n(18),C=n(13),y=n(11),N=n.n(y),S=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).state={nome:"",load:!1},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this;m().then((function(e){var n=e.name;t.setState({nome:n,load:!0})}))}},{key:"render",value:function(){var t=this.state,e=t.nome,n=t.load;return Object(v.jsx)("header",{"data-testid":"header-component",children:n?Object(v.jsxs)("div",{children:[Object(v.jsxs)("h4",{"data-testid":"header-user-name",children:["Usu\xe1rio:"," ",e]}),Object(v.jsx)(j.b,{"data-testid":"link-to-profile",to:"/profile",className:"link-dark",children:"Profile"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(j.b,{"data-testid":"link-to-favorites",to:"/favorites",className:"link-dark",children:"Favorites"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(j.b,{"data-testid":"link-to-search",to:"/search",className:"link-dark",children:"Search"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{})]}):Object(v.jsx)(x,{})})}}]),n}(a.Component),I=function(){var t=Object(C.a)(N.a.mark((function t(e){var n,a,c,r,i,s;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=encodeURI(e).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),t.next=4,fetch(a);case 4:return c=t.sent,t.next=7,c.json();case 7:return r=t.sent,i=r.results,s=i.map((function(t){return{artistId:t.artistId,artistName:t.artistName,collectionId:t.collectionId,collectionName:t.collectionName,collectionPrice:t.collectionPrice,artworkUrl100:t.artworkUrl100,releaseDate:t.releaseDate,trackCount:t.trackCount}})),t.abrupt("return",s);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=I,P=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var t=this.props,e=t.id,n=t.artist,a=t.image,c=t.collectionName;return Object(v.jsx)("div",{children:Object(v.jsx)(j.b,{"data-testid":"link-to-album-".concat(e),to:"/album/".concat(e),className:"link-dark",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("img",{src:a,alt:c}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("span",{children:c}),Object(v.jsx)("br",{}),Object(v.jsx)("span",{children:n})]})})})}}]),n}(a.Component),F=P,A=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).handleChange=function(e){var n,a=e.target,c=a.id,r=a.value,i=t.state.btnClick;i=r.length<2,t.setState((n={},Object(d.a)(n,c,r),Object(d.a)(n,"btnClick",i),n))},t.handleClick=function(){var e=Object(C.a)(N.a.mark((function e(n){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),a=t.state.search,t.setState({load:!0}),w(a).then((function(e){t.setState({lastResult:a,search:"",listOfAlbums:Object(g.a)(e),load:!1})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.state={search:"",btnClick:!0,load:!1,listOfAlbums:[],lastResult:""},t}return Object(o.a)(n,[{key:"render",value:function(){var t=this.state,e=t.search,n=t.btnClick,a=t.load,c=t.listOfAlbums,r=t.lastResult;return Object(v.jsxs)("div",{"data-testid":"page-search",children:[Object(v.jsx)(S,{}),a?Object(v.jsx)(x,{}):Object(v.jsxs)("form",{children:[Object(v.jsx)("input",{type:"text",id:"search","data-testid":"search-artist-input",onChange:this.handleChange,value:e,className:"form-control"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("button",{"data-testid":"search-artist-button",id:"btnSearch",type:"submit",onClick:this.handleClick,disabled:n,className:"btn btn-outline-primary",children:"Pesquisar"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{})]}),c.length>0?Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{children:"Resultado de \xe1lbuns de: ".concat(r)}),c.map((function(t){return Object(v.jsx)(F,{id:t.collectionId,collectionName:t.collectionName,artist:t.artistName,image:t.artworkUrl100},t.collectionId)}))]}):Object(v.jsx)("p",{children:"Nenhum \xe1lbum foi encontrado"})]})}}]),n}(a.Component),J=A,M=function(){var t=Object(C.a)(N.a.mark((function t(e){var n,a;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(e,"&entity=song"));case 2:return n=t.sent,t.next=5,n.json();case 5:return a=t.sent,t.abrupt("return",a.results);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),U=M,D="favorite_songs";JSON.parse(localStorage.getItem(D))||localStorage.setItem(D,JSON.stringify([]));var R=function(){return JSON.parse(localStorage.getItem(D))},E=function(t){return localStorage.setItem(D,JSON.stringify(t))},K=function(t){return function(e){setTimeout((function(){e(t)}),500)}},T=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).carrega=function(){t.setState({load:!0})},t.finaliza=function(){t.setState({load:!1})},t.favoriteClick=function(e,n,a,c){var r,i=e.target.checked;n(),i?(r=c,new Promise((function(t){if(r){var e=R();E([].concat(Object(g.a)(e),[r]))}K("OK")(t)}))).then((function(){t.setState({isCheck:!0},a)})):function(t){return new Promise((function(e){var n=R();E(n.filter((function(e){return e.trackId!==t.trackId}))),K("OK")(e)}))}(c).then((function(){t.setState({isCheck:!1},a)}))},t.state={isCheck:!1,load:!1},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=this.props.trackId;new Promise((function(t){var e=R();K(e)(t)})).then((function(n){var a=n.some((function(t){return t.trackId===e}));t.setState({isCheck:a,load:!1})}))}},{key:"render",value:function(){var t=this,e=this.state,n=e.isCheck,a=e.load,c=this.props,r=c.nameMusic,i=c.previewUrl,s=c.trackId,o=c.forSave;return Object(v.jsx)("div",{"data-testid":"musicacard-page",children:a?Object(v.jsx)(x,{}):Object(v.jsxs)("div",{"btn-group":!0,children:[Object(v.jsx)("h4",{children:r}),Object(v.jsxs)("audio",{"data-testid":"audio-component",src:i,controls:!0,children:[Object(v.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento",Object(v.jsx)("code",{children:"audio"})]}),Object(v.jsxs)("label",{htmlFor:s,className:"btn btn-outline-primary",children:["Favorita",Object(v.jsx)("input",{name:s,id:s,className:"btn-check btncheck1",type:"checkbox","data-testid":" checkbox-music-".concat(s),onChange:function(e){t.favoriteClick(e,t.carrega,t.finaliza,o)},checked:n})]})]})})}}]),n}(a.Component),z=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).getMuisicFromAp=function(){var e=Object(C.a)(N.a.mark((function e(n){var a,c,r,i,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(n);case 2:return a=e.sent,c=a[0],r=c.artistName,i=c.collectionName,e.next=6,a.filter((function(t){return"song"===t.kind}));case 6:s=e.sent,t.setState({artistName:r,collectionName:i,musics:s});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.state={musics:[],artistName:"",collectionName:""},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.match.params.id;this.getMuisicFromAp(t)}},{key:"render",value:function(){var t=this.state,e=t.artistName,n=t.musics,a=t.collectionName;return Object(v.jsxs)("div",{"data-testid":"page-album",children:[Object(v.jsx)(S,{}),Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{"data-testid":"album-name",children:a}),Object(v.jsx)("h4",{"data-testid":"artist-name",children:e}),n.length>0&&n.map((function(t){return Object(v.jsx)(T,{previewUrl:t.previewUrl,nameMusic:t.trackName,trackId:t.trackId,forSave:t},t.trackId)}))]})]})}}]),n}(a.Component),B=z,q=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{"data-testid":"page-favorites",children:[Object(v.jsx)(S,{}),"Bem vindo \xe1 sua p\xe1gina de musicas favoritas"]})}}]),n}(a.Component),L=q,_=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{"data-testid":"page-profile",children:[Object(v.jsx)("h2",{children:" Pagina de Profile "}),Object(v.jsx)(S,{})]})}}]),n}(a.Component),G=_,H=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{"data-testid":"page-profile-edit",children:[Object(v.jsx)("h2",{children:" Pagina de ProfileEdit "}),Object(v.jsx)(S,{})]})}}]),n}(a.Component),Q=H,V=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(v.jsx)("div",{"data-testid":"page-not-found",children:Object(v.jsx)("h2",{children:" Pagina n\xe3o encontrada"})})}}]),n}(a.Component),W=V,X=(n(41),function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(v.jsx)(j.a,{children:Object(v.jsxs)(b.d,{children:[Object(v.jsx)(b.b,{path:"/",exact:!0,component:k}),Object(v.jsx)(b.b,{path:"/search",component:J}),Object(v.jsx)(b.b,{path:"/album/:id",component:B}),Object(v.jsx)(b.b,{path:"/favorites",component:L}),Object(v.jsx)(b.b,{path:"/profile",exact:!0,component:G}),Object(v.jsx)(b.b,{path:"/profile/edit",component:Q}),Object(v.jsx)(b.b,{path:"*",component:W})]})})}}]),n}(c.a.Component)),Y=X;i.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(Y,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.a029e6c3.chunk.js.map